"use strict";var method,course,options,courseCode,courseName,progression,syllabus,output=document.getElementById("output"),editLink=document.getElementsByClassName("edit"),deleteLink=document.getElementsByClassName("delete"),submitBtn=document.getElementById("submit"),inputs=document.getElementsByClassName("text-input"),error=document.getElementsByClassName("error"),courses=document.getElementsByClassName("courses"),courseCodeArr=document.getElementsByClassName("course-code"),courseNameArr=document.getElementsByClassName("course-name"),courseProgressionArr=document.getElementsByClassName("course-progression"),courseSyllabusArr=document.getElementsByClassName("course-syllabus"),confirm=document.getElementById("confirm"),url=new URL(window.location.href),edit=url.searchParams.get("edit"),Delete=url.searchParams.get("delete"),index=url.searchParams.get("index"),i=0,stateObj={foo:"bar"};function add(){if(!edit){for(var e=0;e<inputs.length;e++)inputs[e].value||(error[e].innerHTML="Fältet är obligatoriskt.");return inputs[0].value&&(courseCode=inputs[0].value),inputs[1].value&&(courseName=inputs[1].value),inputs[2].value&&(progression=inputs[2].value),inputs[3].value&&(syllabus=inputs[3].value),course={course_code:courseCode,course_name:courseName,course_progression:progression,course_syllabus:syllabus},4==Object.keys(course).length&&(fetch("https://studenter.miun.se/~mazi2001/writeable/dt173g/moment5/rest-api/api/api.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(course)}).then((function(e){return e.json()})).then((function(e){return confirm.innerHTML=e.message})),!error)}}function prefill(){""!==edit&&(index=Number(index),inputs[0].value=courseCodeArr[index].innerHTML,inputs[1].value=courseNameArr[index].innerHTML,inputs[2].value=courseProgressionArr[index].innerHTML,inputs[3].value=courseSyllabusArr[index].innerHTML)}function deleteCourse(){Delete&&(fetch("https://studenter.miun.se/~mazi2001/writeable/dt173g/moment5/rest-api/api/api.php?id=".concat(index),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return confirm.innerHTML=e.message})),history.replaceState(stateObj,"","index.html"),Delete="")}function update(){if(edit){for(var e=0;e<inputs.length;e++)inputs[e].value||(error[e].innerHTML="Fältet är obligatoriskt.");if(inputs[0].value&&(courseCode=inputs[0].value),inputs[1].value&&(courseName=inputs[1].value),inputs[2].value&&(progression=inputs[2].value),inputs[3].value&&(syllabus=inputs[3].value),course={course_code:courseCode,course_name:courseName,course_progression:progression,course_syllabus:syllabus},4!=Object.keys(course).length)return!1;fetch("https://studenter.miun.se/~mazi2001/writeable/dt173g/moment5/rest-api/api/api.php?id=".concat(index),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(course)}).then((function(e){return e.json()})).then((function(e){return confirm.innerHTML=e.message})),history.replaceState(stateObj,"","index.html"),edit=""}}submitBtn.addEventListener("click",(function(e){e.preventDefault(),add(),update()})),window.addEventListener("load",prefill),window.addEventListener("load",deleteCourse),fetch("https://studenter.miun.se/~mazi2001/writeable/dt173g/moment5/rest-api/api/api.php").then((function(e){return e.json()})).then((function(e){return e.forEach((function(e){output.innerHTML+='<div class="course">\n            <div class="course-inner-wrap-1">\n                <div class="course-inner-wrap-4">\n                    <h2>Kurskod</h2>\n                    <p class="course-code">'.concat(e.course_code,'</p>\n                </div>\n                <div class="course-inner-wrap-5">\n                    <h2>Kursnamn</h2>\n                    <p class="course-name">').concat(e.course_name,'</p>\n                </div>\n            </div>\n            <div class="course-inner-wrap-2">\n                <div class="course-inner-wrap-4">\n                    <h2>Progression</h2>\n                    <p class="course-progression">').concat(e.course_progression,'</p>\n                </div>\n                <div class="course-inner-wrap-5">\n                    <h2>Kursplan</h2>\n                    <p class="course-syllabus"><a href=').concat(e.course_syllabus,'>Kursplan</a></p>\n                </div>\n            </div>\n            <div class="course-inner-wrap-3">\n                <p><a class="edit" href="index.html?edit=1&index=').concat(i,'">Ändra</a></p>\n                <p><a class="delete" href="index.html?delete=1&index=').concat(i,'">Radera</a></p>\n            </div>\n        </div>'),i++}))}));